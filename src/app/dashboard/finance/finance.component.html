<!-- Breadcrumb-->

<div class="row pt-2 pb-2">
    <div class="col-sm-9">
      <tr class="mobile">
        <td style="width:60%;">
          <h4 class="page-title">Expenses</h4>
        </td>
        <td style="width:40%;" >          
      <h4 class="form-control form-control-sm " style="width: 170px; text-align: center; align-items: center;">Total : Rs. <input disabled class="total" type="button" value='{{ getTotal() }}'  /></h4>
    </td>   
    </tr>
    <tr class="desk">
      <td style="width:100%;">
        <h4 class="page-title">Expenses</h4>
      </td>
       
  </tr>
    </div>
    <div class="col-sm-3 desk" >
     
    </div>
  </div>
  <!-- End Breadcrumb-->               
      <input type="text" class="form-control form-control-sm" name="search" [(ngModel)]="searchText" autocomplete="off" placeholder="search" style="border-radius: 10px; height: 40px;">     
      <br>
<!-- Tab Group -->
<div class="row">
	<div class="col-lg-12">
		<div class="card">
			<div class="card-body">
       
        <mat-tab-group  matMultilineTab (selectedTabChange)="tabClick($event)" class="nav-tabs nav-tabs-success">
         
          <mat-tab class="mats" *ngFor="let _Group of List_of_Expenses_Group; let i = index" ngValue="i"
         label="{{_Group.Expense_Group_Name}}" ><i class="fa fa-plus-square dropdown_hand adicon" (click)="openVerticallyCentered(Expenses_Add)"></i>	
         <i class="zmdi zmdi-delete dropdown_hand adicon" (click)="Delete_Expense_group(_Group)"></i>						
         </mat-tab>       			        
        </mat-tab-group>
       
        

        <!-- Desktop -->
        <tr class="desk">
          <td style="width: 200px; text-indent: 10px;">
            <div class="position-relative has-icon-right">
            Spent by
          </div>
          </td>
          <td style="width: 630px; text-indent: 50px;">
            Spent For
          </td>
          <td style="width: 420px; text-align: center;">
            Spent Date
          </td>
          <td style="width: 200px; text-align: center;" >
            Amount
          </td>
        </tr>
    
          <div *ngFor="let _Expense of this.List_of_Expenses_Group[this.Selected_group_Index].List_Of_Expense|filter:searchText let i = index" [attr.data-index]="i" class="desk">
            <table style="cellspacing:2px ">
            <tr>
              <td style="width: 10%;  overflow: auto;" >
                <div class="position-relative has-icon-right" >
                  <input class="form-control form-control-sm" style="width: 100%; " [(ngModel)]="_Expense.Spent_by"
                    name="_Expense.Spent_For" on-focusout="updateFinanceitem(_Expense)">
                </div>
              </td>
            <td style="width: 30%;  overflow: auto;">
              <div class="position-relative has-icon-right">
                <input class="form-control form-control-sm" style="width: 100%; " [(ngModel)]="_Expense.Spent_For"
                  name="_Expense.Spent_For" on-focusout="updateFinanceitem(_Expense)">
              </div>
            </td>
            <td style="width: 14%;  overflow: auto;">
              <div class="position-relative has-icon-right">
              <mat-form-field appearance="outline radius-15" class="form-control form-control-sm">                
                <input matInput [matDatepicker]="picker" [(ngModel)]="_Expense.Spent_date" name="_Expense.Spent_date" (ngModelChange)="updateFinanceitem(_Expense)">
                <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                <mat-datepicker #picker></mat-datepicker>
              </mat-form-field></div>
            </td>  
            <td style="width: 14%;  overflow: auto;">
              <div class="position-relative has-icon-right">
                <input class="form-control form-control-sm" style="width: 100%; " [(ngModel)]="_Expense.Spent_Amount"
                  name="_Expense.Spent_Amount" disabled>
              </div>
            </td>            
            <td style="width: 2%; ">
              <button type="submit" class="zmdi zmdi-delete form-control form-control-sm" (click)="Delete_Expense(_Expense)">
              </button>
            </td> 
          </tr>
        </table>
        

          </div>
          <br class="desk" /><br class="desk" />
          <table style="cellspacing:2px " class="desk">
            <tr>
            <td style="width: 60%;  overflow: auto;">
             
            </td>
            <td style="width: 14%;  overflow: auto;">
             
            </td>  
            <td style="width: 14%;  overflow: auto;">
              <h4 class="form-control form-control-sm" style="width: 310px; text-align: center; align-items: center;">Total : Rs. <input disabled class="total" type="button" value='{{ getTotal() }}'  /></h4>
            </td>            
            <td style="width: 2%; ">
             
            </td> 
          </tr>
        </table>
        


        <!-- Mobile -->




        <div class="sticky-container">
          <div class="table-responsive mobile">
           

            
              <tr class="mobile">
                <td style="width: 80px; text-indent: 8px;">
                  <div class="position-relative has-icon-right">
                  Spent by
                </div>
                </td>
                <td style="width: 300px; text-indent: 12px;">                 
                  Spent For              
                </td>
                <td style="width: 200px; text-align: right; text-indent: 110px;">
                  Spent Date
                </td>
                <td style="width: 200px; text-align: right;"  class="sticky-right">
                  Amount
                </td>
              </tr>  
          
          <table class="table table-lg">
          <tbody >
          <div *ngFor="let _Expense of this.List_of_Expenses_Group[this.Selected_group_Index].List_Of_Expense|filter:searchText let i = index" [attr.data-index]="i">
            
            <tr>
              <td  >
                <div class="position-relative has-icon-right" >
                  <input class="form-control form-control-sm" style="width: 80px; " [(ngModel)]="_Expense.Spent_by"
                    name="_Expense.Spent_For" on-focusout="updateFinanceitem(_Expense)">
                </div>
              </td>
            <td style="width: 170px;">
              <div class="position-relative has-icon-right">
                <input class="form-control form-control-sm" style="width: 170px; " [(ngModel)]="_Expense.Spent_For"
                  name="_Expense.Spent_For" on-focusout="updateFinanceitem(_Expense)">
              </div>
            </td>
            <td style="width: 120px;  overflow: auto;">
              <div class="position-relative has-icon-right">
              <mat-form-field appearance="outline radius-15" class="form-control form-control-sm" style="width: 120px;">                
                <input matInput  [matDatepicker]="picker" [(ngModel)]="_Expense.Spent_date" name="_Expense.Spent_date" (ngModelChange)="updateFinanceitem(_Expense)">
                <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                <mat-datepicker #picker></mat-datepicker>
              </mat-form-field></div>
            </td>  
            <td style="width: 57px;  overflow: auto;" class="sticky-right" >
              <div class="position-relative has-icon-right">
                <input class="form-control form-control-sm" style="width: 57px;" [(ngModel)]="_Expense.Spent_Amount"
                  name="_Expense.Spent_Amount" disabled>
              </div>
            </td>            
            <td style="width: 10px; ">
              <button type="submit" class="zmdi zmdi-delete form-control form-control-sm" (click)="Delete_Expense(_Expense)">
              </button>
            </td> 
          </tr>
         
          </div>
         </tbody>
          </table>

          </div></div>
        





          <input hidden type="text" value='{{ getTotal() }}' />
           
          <mat-toolbar color="accent" class="footer">
            
            <form>
          <!--  <input   [(ngModel)]="Temp_Expenses.add" name="Temp_Expenses.add" [value]="Temp_Expenses.Paid_by.length + Temp_Expenses.split_equaly.length" > -->
              <table style="cellspacing:5px">
              <tr>                                
                  <td style=" background: transparent;" >
                    <input autofocus style="width: 100%; " [(ngModel)]="FirebaseUser_.userName" name="FirebaseUser_.userName"  class="form-control" placeholder="Spent_by">
                  </td>
                <td style="width: 300px;">
                  <div class="position-relative has-icon-right">
                    <input autofocus style="width: 100%; " [(ngModel)]="Temp_Expense.Spent_For" name="Temp_Expense.Spent_For" placeholder="Spent_For" class="form-control">
                  </div>
                </td>
                <td style="width: 300px;">
                  <div class="position-relative has-icon-right">
                    <input type="number" style="width: 100%; " [(ngModel)]="Temp_Expense.Spent_Amount" name="Temp_Expense.Spent_Amount" placeholder="Spent_Amount" class="form-control">
                  </div>
                </td>
                <td style="width: 14%;  overflow: auto;">
                  <div class="position-relative has-icon-right">
                  <mat-form-field appearance="outline radius-15" class="form-control">                
                    <input matInput [matDatepicker]="picker" [(ngModel)]="Temp_Expense.Spent_date" name="Temp_Expense.Spent_date" placeholder="Spent_date">
                    <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                    <mat-datepicker #picker></mat-datepicker>
                  </mat-form-field></div>
                </td>                                            
                           
                <td> <!-- Temp_Finance_Items.split_equaly-->
                  <input type="submit"  class="btn  btn-block btn-light form-control"
                    style=" border-radius: 2px; color: white;  height: 38px;"
                    (click)="create_Expenses(Temp_Expense)"  value="Save" (click)="reset()" (window:keypress.enter)="onSomeAction($event)">
                </td>
              </tr>
            </table>
            </form>          
          </mat-toolbar> 
          
          
          <mat-toolbar color="accent" class="foot">           
            <form>
              <table style="cellspacing:5px">
              <tr >
                <td style="width: 27%;">
                  <div class="position-relative has-icon-right">
                    <input style="width: 100%; margin-left: -7px;"  [(ngModel)]="FirebaseUser_.userName" name="FirebaseUser_.userName"  class="form-control" placeholder="Spent_by">
                  </div>
                </td>
                <td style="width: 43%;">
                  <div class="position-relative has-icon-right">
                    <input autofocus style="width: 100%; margin-left: -7px;" [(ngModel)]="Temp_Expense.Spent_For" name="Temp_Expense.Spent_For" placeholder="Spent_For" class="form-control">
                  </div>
                </td>
                <td style="width: 25%;">
                  <div class="position-relative has-icon-right">
                    <input type="number" style="width: 100%; margin-left: -7px;"  [(ngModel)]="Temp_Expense.Spent_Amount" name="Temp_Expense.Spent_Amount" placeholder="Spent_Amount" class="form-control">
                  </div>
                </td>
                <td style=" background: transparent; width: 10%;">
                  <div class="position-relative has-icon-right">
                    <mat-form-field appearance="outline radius-15" class="form-control" style="font-size: 16px; width: 25px; min-height: 38px; margin-left: -7px;">                
                      <input matInput  [(ngModel)]="Temp_Expense.Spent_date" name="Temp_Expense.Spent_date" placeholder="Spent_date"  >
                      <mat-datepicker-toggle matSuffix [for]="picker" style="margin-left: -20px; margin-top: 5px;"></mat-datepicker-toggle>
                      <mat-datepicker #picker></mat-datepicker>
                    </mat-form-field></div>
                </td>
                <td style="width: 5%;">                
                    <mat-icon  (click)="create_Expenses(Temp_Expense)" (click)="reset()"  style="margin-top: 10px; " (window:keypress.enter)="onSomeAction($event)">send</mat-icon>
                </td>
              </tr>
            </table>
            </form>          
          </mat-toolbar>



			    <!--	<ul class="nav nav-tabs nav-tabs-success">
					<li class="nav-item" *ngFor="let _Group of List_of_Expenses_Group">
						<a class="nav-link" data-toggle="tab" href="#{{_Group.Expense_Group_Name}}">	<i class="icon-people icons"></i>
							<span class="hidden-xs">{{_Group.Expense_Group_Name}}</span>            
						</a>
					</li>
				
					<li ngbDropdown class="nav-item">
						<a class="nav-link" href="javascript:;" (click)="openVerticallyCentered(Expenses_Add)">	<i class="fa fa-plus-square"></i>							
						</a>					
					</li>
				  </ul>-->
          <ng-template #Expenses_Add let-modal>
          <div class="modal-header">
            <h1 class="modal-title" style="margin-left: 0px;font-weight: 500;">Create Expenses Group</h1>
            <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <form #myForm="ngForm">
              <label>Expenses Group Name</label>
              <div class="form-group">
                <mat-form-field appearance="outline radius-15" class="" style="width: 100%; height: 100%;">
                  <input matInput [(ngModel)]="Temp_Expense_Group.Expense_Group_Name" name='Temp_Expense_Group.Expense_Group_Name'  required class="form-control" style="border: 1px solid chartreuse;">
                </mat-form-field>
                <br><br>                
                <!-- Place to render the image -->
              </div>
            </form>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-light" (click)="modal.close('Close click')">Cancel</button>
            <button type="button" class="btn btn-primary" (click)="create_Expenses_Group(Temp_Expense_Group)" (click)="reset_group()"
              [disabled]="myForm.invalid" (click)="modal.dismiss('Cross click')">Create Group Name</button>

          <!--    <button type="button" class="btn btn-primary" (click)="create_workspace(Workspace_Name)"
              [disabled]="myForm.invalid" (click)="modal.dismiss('Cross click')" (click)="reset()">Create
              Workspace</button>  -->
          </div>
          </ng-template>
				  <!-- Tab panes -->
		    	<!--	<div class="tab-content">
					<div *ngFor="let _Group of List_of_Expenses_Group"  class="container tab-pane active" id="{{_Group.Expense_Group_Name}}">
						<p>{{_Group.Expense_Group_Name}}</p>
						
					</div>					
				  </div>-->
			</div>
		</div>
	</div>
</div>

<!-- Tab Group -->      
      <!--End Row-->
